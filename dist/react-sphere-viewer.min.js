!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.ReactSphereViewer=t()}}(function(){var t;return function e(t,o,i){function n(r,a){if(!o[r]){if(!t[r]){var h="function"==typeof require&&require;if(!a&&h)return h(r,!0);if(s)return s(r,!0);var p=new Error("Cannot find module '"+r+"'");throw p.code="MODULE_NOT_FOUND",p}var c=o[r]={exports:{}};t[r][0].call(c.exports,function(e){var o=t[r][1][e];return n(o?o:e)},c,c.exports,e,t,o,i)}return o[r].exports}for(var s="function"==typeof require&&require,r=0;r<i.length;r++)n(i[r]);return n}({1:[function(e,o,i){!function(e,o){"function"==typeof t&&t.amd?t(["three"],o):e.PhotoSphereViewer=o(window.THREE)}(this,function(t){"use strict";function e(t){if(!(this instanceof e))return new e(t);if(void 0===t||void 0===t.panorama||void 0===t.container)throw new f("no value given for panorama or container");if(this.config=m.deepmerge(e.DEFAULTS,t),this.config.min_fov=m.stayBetween(this.config.min_fov,1,179),this.config.max_fov=m.stayBetween(this.config.max_fov,1,179),this.config.tilt_up_max=m.stayBetween(this.config.tilt_up_max,-e.HalfPI,e.HalfPI),this.config.tilt_down_max=m.stayBetween(this.config.tilt_down_max,-e.HalfPI,e.HalfPI),null===this.config.default_fov?this.config.default_fov=this.config.max_fov:this.config.default_fov=m.stayBetween(this.config.default_fov,this.config.min_fov,this.config.max_fov),null===this.config.anim_lat&&(this.config.anim_lat=this.config.default_lat),this.config.anim_lat=m.stayBetween(this.config.anim_lat,-e.HalfPI,e.HalfPI),this.config.tilt_up_max<this.config.tilt_down_max)throw new f("tilt_up_max cannot be lower than tilt_down_max");this.config.caption&&!this.config.navbar&&(this.config.navbar="caption"),this.parent="string"==typeof this.config.container?document.getElementById(this.config.container):this.config.container,this.container=null,this.loader=null,this.navbar=null,this.hud=null,this.panel=null,this.tooltip=null,this.canvas_container=null,this.renderer=null,this.scene=null,this.camera=null,this.mesh=null,this.raycaster=null,this.actions={},this.prop={fps:60,latitude:0,longitude:0,anim_speed:0,zoom_lvl:0,moving:!1,zooming:!1,start_mouse_x:0,start_mouse_y:0,mouse_x:0,mouse_y:0,pinch_dist:0,direction:null,autorotate_timeout:null,animation_timeout:null,start_timeout:null,size:{width:0,height:0,ratio:0,image_width:0,image_height:0}},this.prop.zoom_lvl=Math.round((this.config.default_fov-this.config.min_fov)/(this.config.max_fov-this.config.min_fov)*100),this.prop.zoom_lvl-=2*(this.prop.zoom_lvl-50),this.container=document.createElement("div"),this.container.classList.add("psv-container"),this.parent.appendChild(this.container),this.setAnimSpeed(this.config.anim_speed),this.rotate(this.config.default_long,this.config.default_lat),null!==this.config.size&&this._setViewerSize(this.config.size),this.config.autoload&&this.load()}function o(t){this.psv=t,this.container=null,this.constructor.publicMethods&&this.constructor.publicMethods.forEach(function(t){this.psv[t]=this[t].bind(this)},this)}function i(t){this.psv=t,this.container=null,this.canvas=null,this.create()}function n(t){o.call(this,t),this.markers={},this.currentMarker=null,this.create()}function s(t){o.call(this,t),this.content=null,this.prop={mouse_x:0,mouse_y:0,mousedown:!1,opened:!1},this.create()}function r(t){o.call(this,t),this.config=this.psv.config.tooltip,this.create()}function a(t){if(o.call(this,t),this.config=this.psv.config.navbar,this.caption=null,this.buttons=[],this.config===!0)this.config=m.clone(a.DEFAULTS);else if("string"==typeof this.config){var e={};Object.keys(a.DEFAULTS).forEach(function(t){e[t]=this.config.indexOf(t)!==-1},this),this.config=e}this.create()}function h(t){this.navbar=t,this.psv=t.psv,this.button=null}function p(t){h.call(this,t),this.create()}function c(t){h.call(this,t),this.create()}function l(t){h.call(this,t),this.zoom_range=null,this.zoom_value=null,this.prop={mousedown:!1},this.create()}function u(t){h.call(this,t),this.create()}function d(t){h.call(this,t),this.prop={panelOpened:!1,panelOpening:!1},this.create()}function f(t){this.message=t,"captureStackTrace"in Error?Error.captureStackTrace(this,f):this.stack=(new Error).stack}e.PI=Math.PI,e.TwoPI=2*Math.PI,e.HalfPI=Math.PI/2,e.MOVE_THRESHOLD=4,e.ICONS={},e.DEFAULTS={panorama:null,container:null,caption:null,autoload:!0,usexmpdata:!0,min_fov:30,max_fov:90,default_fov:null,default_long:0,default_lat:0,tilt_up_max:e.HalfPI,tilt_down_max:-e.HalfPI,long_offset:Math.PI/1440,lat_offset:Math.PI/720,time_anim:2e3,anim_speed:"2rpm",anim_lat:null,navbar:!1,tooltip:{offset:5,arrow_size:7},lang:{autorotate:"Automatic rotation",zoom:"Zoom",zoomOut:"Zoom out",zoomIn:"Zoom in",download:"Download",fullscreen:"Fullscreen",markers:"Markers"},mousewheel:!0,mousemove:!0,loading_img:null,loading_txt:"Loading...",size:null,markers:[]},e.prototype.destroy=function(){window.removeEventListener("resize",this),document.removeEventListener(m.fullscreenEvent(),this),this.config.mousemove&&(this.hud.container.removeEventListener("mousedown",this),this.hud.container.removeEventListener("touchstart",this),window.removeEventListener("mouseup",this),window.removeEventListener("touchend",this),this.hud.container.removeEventListener("mousemove",this),this.hud.container.removeEventListener("touchmove",this)),this.config.mousewheel&&this.hud.container.removeEventListener(m.mouseWheelEvent(),this),this.hud&&this.hud.destroy(),this.loader&&this.loader.destroy(),this.navbar&&this.navbar.destroy(),this.panel&&this.panel.destroy(),this.tooltip&&this.tooltip.destroy(),this.scene&&(this.scene.remove(this.camera),this.scene.remove(this.mesh)),this.mesh&&this.mesh.material&&(this.mesh.material.geometry&&this.mesh.material.geometry.dispose(),this.mesh.material.map&&this.mesh.material.map.dispose(),this.mesh.material.dispose()),this.canvas_container&&this.container.removeChild(this.canvas_container),this.parent.removeChild(this.container),this.container=null,this.loader=null,this.navbar=null,this.hud=null,this.panel=null,this.tooltip=null,this.canvas_container=null,this.renderer=null,this.scene=null,this.camera=null,this.mesh=null,this.raycaster=null,this.actions={}},e.prototype.load=function(){return this.container.classList.add("loading"),m.isCanvasSupported()?(this.loader=new i(this),this.canvas_container=document.createElement("div"),this.canvas_container.className="psv-canvas-container",this.container.appendChild(this.canvas_container),void(this.config.usexmpdata?this._loadXMP():this._loadTexture(!1,!1))):void(this.container.textContent="Canvas is not supported, update your browser!")},e.prototype._loadXMP=function(){if(!window.XMLHttpRequest)return void(this.container.textContent="XHR is not supported, update your browser!");var t=new XMLHttpRequest,e=this,o=0;t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status||201===t.status||202===t.status||0===t.status){e.loader.setProgress(100);var i=t.responseText,n=i.indexOf("<x:xmpmeta"),s=i.indexOf("</x:xmpmeta>"),r=i.substring(n,s);if(n===-1||s===-1||r.indexOf("GPano:")===-1)return void e._loadTexture(!1,!0);var a={full_width:parseInt(m.getXMPValue(r,"FullPanoWidthPixels")),full_height:parseInt(m.getXMPValue(r,"FullPanoHeightPixels")),cropped_width:parseInt(m.getXMPValue(r,"CroppedAreaImageWidthPixels")),cropped_height:parseInt(m.getXMPValue(r,"CroppedAreaImageHeightPixels")),cropped_x:parseInt(m.getXMPValue(r,"CroppedAreaLeftPixels")),cropped_y:parseInt(m.getXMPValue(r,"CroppedAreaTopPixels"))};e._loadTexture(a,!0)}else e.container.textContent="Cannot load image";else 3===t.readyState&&e.loader.setProgress(o+10)},t.onprogress=function(t){if(t.lengthComputable){var i=parseInt(t.loaded/t.total*100);i>o&&(o=i,e.loader.setProgress(o))}},t.onerror=function(){e.container.textContent="Cannot load image"},t.open("GET",this.config.panorama,!0),t.send(null)},e.prototype._loadTexture=function(e,o){var i=new t.ImageLoader,n=this,s=o?100:0;this.config.panorama.match(/^data:image\/[a-z]+;base64/)||i.setCrossOrigin("anonymous");var r=function(t){n.loader.setProgress(100),e={full_width:t.width,full_height:t.height,cropped_width:t.width,cropped_height:t.height,cropped_x:0,cropped_y:0};var o=4096;m.isWebGLSupported()&&(o=m.getMaxTextureWidth());var i=Math.min(e.full_width,o),s=i/e.full_width;e.full_width*=s,e.full_height*=s,e.cropped_width*=s,e.cropped_height*=s,e.cropped_x*=s,e.cropped_y*=s,t.width=e.cropped_width,t.height=e.cropped_height;var r=document.createElement("canvas");r.width=e.full_width,r.height=e.full_height;var a=r.getContext("2d");a.drawImage(t,e.cropped_x,e.cropped_y,e.cropped_width,e.cropped_height),n.prop.size.image_width=e.cropped_width,n.prop.size.image_height=e.cropped_height,n._createScene(r)},a=function(t){if(t.lengthComputable){var e=parseInt(t.loaded/t.total*100);e>s&&(s=e,n.loader.setProgress(s))}},h=function(){n.container.textContent="Cannot load image"};i.load(this.config.panorama,r,a,h)},e.prototype._createScene=function(o){this._onResize(),this.raycaster=new t.Raycaster,this.renderer=m.isWebGLSupported()?new t.WebGLRenderer({preserveDrawingBuffer:!0}):new t.CanvasRenderer,this.renderer.setSize(this.prop.size.width,this.prop.size.height),this.camera=new t.PerspectiveCamera(this.config.default_fov,this.prop.size.ratio,1,300),this.camera.position.set(0,0,0),this.scene=new t.Scene,this.scene.add(this.camera);var i=new t.Texture(o);i.minFilter=t.LinearFilter,i.generateMipmaps=!1,i.needsUpdate=!0;var h=new t.SphereGeometry(200,32,32,(-e.HalfPI)),p=new t.MeshBasicMaterial({map:i,overdraw:!0});p.side=t.DoubleSide,this.mesh=new t.Mesh(h,p),this.mesh.scale.x=-1,this.scene.add(this.mesh),this.canvas_container.appendChild(this.renderer.domElement),this.loader.destroy(),this.loader=null,this.container.classList.remove("loading"),this.config.navbar&&(this.container.classList.add("has-navbar"),this.navbar=new a(this)),this.hud=new n(this),this.config.markers.forEach(function(t){this.hud.addMarker(t,!1)},this),this.panel=new s(this),this.tooltip=new r(this),this.config.time_anim!==!1&&(this.prop.start_timeout=setTimeout(this.startAutorotate.bind(this),this.config.time_anim)),this._bindEvents(),this.trigger("ready"),this.render()},e.prototype._bindEvents=function(){window.addEventListener("resize",this),document.addEventListener(m.fullscreenEvent(),this),this.config.mousemove&&(this.hud.container.style.cursor="move",this.hud.container.addEventListener("mousedown",this),this.hud.container.addEventListener("touchstart",this),window.addEventListener("mouseup",this),window.addEventListener("touchend",this),this.hud.container.addEventListener("mousemove",this),this.hud.container.addEventListener("touchmove",this)),this.config.mousewheel&&this.hud.container.addEventListener(m.mouseWheelEvent(),this)},e.prototype.handleEvent=function(t){switch(t.type){case"resize":this._onResize();break;case"mousedown":this._onMouseDown(t);break;case"touchstart":this._onTouchStart(t);break;case"mouseup":this._onMouseUp(t);break;case"touchend":this._onTouchEnd(t);break;case"mousemove":this._onMouseMove(t);break;case"touchmove":this._onTouchMove(t);break;case m.fullscreenEvent():this._fullscreenToggled();break;case m.mouseWheelEvent():this._onMouseWheel(t)}},e.prototype.render=function(){this.prop.direction=new t.Vector3(-Math.cos(this.prop.latitude)*Math.sin(this.prop.longitude),Math.sin(this.prop.latitude),Math.cos(this.prop.latitude)*Math.cos(this.prop.longitude)),this.camera.lookAt(this.prop.direction),this.renderer.render(this.scene,this.camera),this.trigger("render")},e.prototype._autorotate=function(){this.rotate(this.prop.longitude+this.prop.anim_speed/this.prop.fps,this.prop.latitude-(this.prop.latitude-this.config.anim_lat)/200),this.prop.autorotate_timeout=setTimeout(this._autorotate.bind(this),1e3/this.prop.fps)},e.prototype.startAutorotate=function(){clearTimeout(this.prop.start_timeout),this.prop.start_timeout=null,this.stopAnimation(),this._autorotate(),this.trigger("autorotate",!0)},e.prototype.stopAutorotate=function(){clearTimeout(this.prop.start_timeout),this.prop.start_timeout=null,clearTimeout(this.prop.autorotate_timeout),this.prop.autorotate_timeout=null,this.trigger("autorotate",!1)},e.prototype.toggleAutorotate=function(){this.prop.autorotate_timeout?this.stopAutorotate():this.startAutorotate()},e.prototype._onResize=function(){this.container.clientWidth==this.prop.size.width&&this.container.clientHeight==this.prop.size.height||this.resize(this.container.clientWidth,this.container.clientHeight)},e.prototype.resize=function(t,e){this.prop.size.width=parseInt(t),this.prop.size.height=parseInt(e),this.prop.size.ratio=this.prop.size.width/this.prop.size.height,this.camera&&(this.camera.aspect=this.prop.size.ratio,this.camera.updateProjectionMatrix()),this.renderer&&(this.renderer.setSize(this.prop.size.width,this.prop.size.height),this.render()),this.trigger("size-updated",this.prop.size.width,this.prop.size.height)},e.prototype._onMouseDown=function(t){this._startMove(t)},e.prototype._onTouchStart=function(t){1===t.touches.length?this._startMove(t.touches[0]):2===t.touches.length&&this._startZoom(t)},e.prototype._startMove=function(t){this.prop.mouse_x=this.prop.start_mouse_x=parseInt(t.clientX),this.prop.mouse_y=this.prop.start_mouse_y=parseInt(t.clientY),this.prop.moving=!0,this.prop.moved=!1,this.prop.zooming=!1,this.stopAutorotate(),this.stopAnimation()},e.prototype._startZoom=function(t){var e=[{x:parseInt(t.touches[0].clientX),y:parseInt(t.touches[0].clientY)},{x:parseInt(t.touches[1].clientX),y:parseInt(t.touches[1].clientY)}];this.prop.pinch_dist=Math.sqrt(Math.pow(e[0].x-e[1].x,2)+Math.pow(e[0].y-e[1].y,2)),this.prop.moving=!1,this.prop.zooming=!0,this.stopAutorotate(),this.stopAnimation()},e.prototype._onMouseUp=function(t){this._stopMove(t)},e.prototype._onTouchEnd=function(t){this._stopMove(t.changedTouches[0])},e.prototype._stopMove=function(t){this.prop.moving&&(Math.abs(t.clientX-this.prop.start_mouse_x)<e.MOVE_THRESHOLD&&Math.abs(t.clientY-this.prop.start_mouse_y)<e.MOVE_THRESHOLD?this._click(t):this.prop.moved=!0),this.prop.moving=!1,this.prop.zooming=!1},e.prototype._click=function(o){if(this.trigger("_click",o),!o.defaultPrevented){var i=this.container.getBoundingClientRect(),n={client_x:parseInt(o.clientX-i.left),client_y:parseInt(o.clientY-i.top)},s=new t.Vector2(2*n.client_x/this.prop.size.width-1,-2*n.client_y/this.prop.size.height+1);this.raycaster.setFromCamera(s,this.camera);var r=this.raycaster.intersectObjects(this.scene.children);if(1===r.length){var a=r[0].point,h=Math.acos(a.y/Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z)),p=Math.atan2(a.x,a.z);n.longitude=p<0?-p:e.TwoPI-p,n.latitude=e.HalfPI-h;var c=n.longitude/e.TwoPI*this.prop.size.image_width,l=n.latitude/e.PI*this.prop.size.image_height;n.texture_x=parseInt(n.longitude<e.PI?c+this.prop.size.image_width/2:c-this.prop.size.image_width/2),n.texture_y=parseInt(this.prop.size.image_height/2-l),this.trigger("click",n)}}},e.prototype._onMouseMove=function(t){t.preventDefault(),this._move(t)},e.prototype._onTouchMove=function(t){1===t.touches.length?(t.preventDefault(),this._move(t.touches[0])):2===t.touches.length&&(t.preventDefault(),this._zoom(t))},e.prototype._move=function(t){if(this.prop.moving){var e=parseInt(t.clientX),o=parseInt(t.clientY);this.rotate(this.prop.longitude-(e-this.prop.mouse_x)*this.config.long_offset,this.prop.latitude+(o-this.prop.mouse_y)*this.config.lat_offset),this.prop.mouse_x=e,this.prop.mouse_y=o}},e.prototype._zoom=function(t){if(this.prop.zooming){var e=[{x:parseInt(t.touches[0].clientX),y:parseInt(t.touches[0].clientY)},{x:parseInt(t.touches[1].clientX),y:parseInt(t.touches[1].clientY)}],o=Math.sqrt(Math.pow(e[0].x-e[1].x,2)+Math.pow(e[0].y-e[1].y,2)),i=80*(o-this.prop.pinch_dist)/this.prop.size.width;this.zoom(this.prop.zoom_lvl+i),this.prop.pinch_dist=o}},e.prototype.rotate=function(t,o){this.prop.longitude=t-Math.floor(t/e.TwoPI)*e.TwoPI,this.prop.latitude=m.stayBetween(o,this.config.tilt_down_max,this.config.tilt_up_max),this.renderer&&this.render(),this.trigger("position-updated",this.prop.longitude,this.prop.latitude)},e.prototype.animate=function(t,o,i){if(!i)return void this.rotate(t,o);t-=Math.floor(t/e.TwoPI)*e.TwoPI,o=m.stayBetween(o,this.config.tilt_down_max,this.config.tilt_up_max);var n,s=this.prop.longitude,r=this.prop.latitude;if(i&&"number"==typeof i)n=i/1e3;else{var a=i?this._parseAnimSpeed(i):this.prop.anim_speed,h=Math.acos(Math.cos(r)*Math.cos(o)*Math.cos(s-t)+Math.sin(r)*Math.sin(o));n=h/a}var p=n*this.prop.fps,c=[t-s,e.TwoPI-s+t,t-s-e.TwoPI],l=c.reduce(function(t,e){return Math.abs(e)<Math.abs(t)?e:t},1/0),u=o-r;this.stopAutorotate(),this.stopAnimation(),this._animate(l/p,u/p,t,o)},e.prototype._animate=function(t,e,o,i){0!==t&&Math.abs(this.prop.longitude-o)<=2*Math.abs(t)&&(t=0,this.prop.longitude=o),0!==e&&Math.abs(this.prop.latitude-i)<=2*Math.abs(e)&&(e=0,this.prop.latitude=i),this.rotate(this.prop.longitude+t,this.prop.latitude+e),0!==t||0!==e?this.prop.animation_timeout=setTimeout(this._animate.bind(this,t,e,o,i),1e3/this.prop.fps):this.stopAnimation()},e.prototype.stopAnimation=function(){clearTimeout(this.prop.animation_timeout),this.prop.animation_timeout=null},e.prototype._onMouseWheel=function(t){t.preventDefault(),t.stopPropagation();var e=void 0!==t.deltaY?-t.deltaY:void 0!==t.wheelDelta?t.wheelDelta:-t.detail;if(0!==e){var o=parseInt(e/Math.abs(e));this.zoom(this.prop.zoom_lvl+o)}},e.prototype.zoom=function(t){this.prop.zoom_lvl=m.stayBetween(parseInt(Math.round(t)),0,100),this.camera.fov=this.config.max_fov+this.prop.zoom_lvl/100*(this.config.min_fov-this.config.max_fov),this.camera.updateProjectionMatrix(),this.render(),this.trigger("zoom-updated",this.prop.zoom_lvl)},e.prototype.zoomIn=function(){this.prop.zoom_lvl<100&&this.zoom(this.prop.zoom_lvl+1)},e.prototype.zoomOut=function(){this.prop.zoom_lvl>0&&this.zoom(this.prop.zoom_lvl-1)},e.prototype._fullscreenToggled=function(){this.trigger("fullscreen-updated",m.isFullscreenEnabled())},e.prototype.toggleFullscreen=function(){m.isFullscreenEnabled()?m.exitFullscreen():m.requestFullscreen(this.container)},e.prototype._parseAnimSpeed=function(t){t=t.toString().trim();var o=parseFloat(t.replace(/^(-?[0-9]+(?:\.[0-9]*)?).*$/,"$1")),i=t.replace(/^-?[0-9]+(?:\.[0-9]*)?(.*)$/,"$1").trim();i.match(/(pm|per minute)$/)&&(o/=60);var n=0;switch(i){case"dpm":case"degrees per minute":case"dps":case"degrees per second":n=o*Math.PI/180;break;case"radians per minute":case"radians per second":n=o;break;case"rpm":case"revolutions per minute":case"rps":case"revolutions per second":n=o*e.TwoPI;break;default:throw new f('unknown speed unit "'+i+'"')}return n},e.prototype.setAnimSpeed=function(t){this.prop.anim_speed=this._parseAnimSpeed(t)},e.prototype._setViewerSize=function(t){["width","height"].forEach(function(e){t[e]&&(/^[0-9.]+$/.test(t[e])&&(t[e]+="px"),this.parent.style[e]=t[e])},this)},e.prototype.on=function(t,e){t in this.actions||(this.actions[t]=[]),this.actions[t].push(e)},e.prototype.off=function(t,e){if(t in this.actions){var o=this.actions[t].indexOf(e);o!==-1&&this.actions[t].splice(o,1)}},e.prototype.trigger=function(t,e){e=Array.prototype.slice.call(arguments,1),t in this.actions&&this.actions[t].length>0&&this.actions[t].forEach(function(o){"object"==typeof o?o.handleEvent({type:"psv:"+t,args:e}):o.apply(this,e)},this)},o.prototype.create=function(){this.container=document.createElement("div"),this.psv.container.appendChild(this.container)},o.prototype.destroy=function(){this.psv.container.removeChild(this.container),this.container=null,this.psv=null},i.prototype.create=function(){this.container=document.createElement("div"),this.container.className="psv-loader",this.psv.container.appendChild(this.container),this.canvas=document.createElement("canvas"),this.canvas.className="loader-canvas",this.canvas.width=this.container.clientWidth,this.canvas.height=this.container.clientWidth,this.container.appendChild(this.canvas),this.tickness=(this.container.offsetWidth-this.container.clientWidth)/2;var t;if(this.psv.config.loading_img?(t=document.createElement("img"),t.className="loader-image",t.src=this.psv.config.loading_img):this.psv.config.loading_txt&&(t=document.createElement("div"),t.className="loader-text",t.innerHTML=this.psv.config.loading_txt),t){var e=Math.round(Math.sqrt(2*Math.pow(this.canvas.width/2-this.tickness/2,2)));t.style.maxWidth=e+"px",t.style.maxHeight=e+"px",this.container.appendChild(t)}},i.prototype.destroy=function(){this.psv.container.removeChild(this.container),this.psv=null,this.container=null},i.prototype.setProgress=function(t){var e=this.canvas.getContext("2d");e.clearRect(0,0,this.canvas.width,this.canvas.height),e.lineWidth=this.tickness,e.strokeStyle=m.getStyle(this.container,"color"),e.beginPath(),e.arc(this.canvas.width/2,this.canvas.height/2,this.canvas.width/2-this.tickness/2,-Math.PI/2,t/100*2*Math.PI-Math.PI/2),e.stroke()},n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.publicMethods=["addMarker","removeMarker","updateMarker","getMarker","getCurrentMarker","gotoMarker","hideMarker","showMarker","toggleMarker"],n.prototype.create=function(){o.prototype.create.call(this),this.container.className="psv-hud",this.container.addEventListener("mouseenter",this,!0),this.container.addEventListener("mouseleave",this,!0),this.psv.on("_click",this),this.psv.on("render",this)},n.prototype.destroy=function(){this.container.removeEventListener("mouseenter",this),this.container.removeEventListener("mouseleave",this),this.psv.off("_click",this),this.psv.off("render",this),o.prototype.destroy.call(this)},n.prototype.handleEvent=function(t){switch(t.type){case"mouseenter":this._onMouseEnter(t);break;case"mouseleave":this._onMouseLeave(t);break;case"psv:_click":this._onClick(t.args[0]);break;case"psv:render":this.updatePositions()}},n.prototype.addMarker=function(t,e){if(!t.id)throw new f("missing marker id");if(this.markers[t.id])throw new f('marker "'+t.id+'" already exists');if(!t.image&&!t.html)throw new f("missing marker image/html");if(t.image&&(!t.width||!t.height))throw new f("missing marker width/height");if(!(t.hasOwnProperty("x")&&t.hasOwnProperty("y")||t.hasOwnProperty("latitude")&&t.hasOwnProperty("longitude")))throw new f("missing marker position, latitude/longitude or x/y");return t.$el=document.createElement("div"),t.$el.id="psv-marker-"+t.id,t.$el.className="psv-marker",this.markers[t.id]=t,this.container.appendChild(t.$el),this.updateMarker(m.clone(t),e)},n.prototype.getMarker=function(t){var e="object"==typeof t?t.id:t;if(!this.markers[e])throw new f('cannot find marker "'+e+'"');return this.markers[e]},n.prototype.getCurrentMarker=function(){return this.currentMarker},n.prototype.updateMarker=function(o,i){var n=this.getMarker(o);n.className&&n.$el.classList.remove(n.className),n.tooltip&&n.$el.classList.remove("has-tooltip"),delete o.$el,o=m.deepmerge(n,o),o.position2D=null,o.className&&o.$el.classList.add(o.className),o.tooltip&&(o.$el.classList.add("has-tooltip"),"string"==typeof o.tooltip&&(o.tooltip={content:o.tooltip}));var s=o.$el.style;if(o.width&&o.height?(s.width=o.width+"px",s.height=o.height+"px",o.dynamicSize=!1):o.dynamicSize=!0,o.style&&Object.getOwnPropertyNames(o.style).forEach(function(t){s[t]=o.style[t]}),o.image?s.backgroundImage="url("+o.image+")":o.$el.innerHTML=o.html,o.anchor=m.parsePosition(o.anchor),o.hasOwnProperty("x")&&o.hasOwnProperty("y")){var r=o.x/this.psv.prop.size.image_width*e.TwoPI,a=o.y/this.psv.prop.size.image_height*e.PI;o.longitude=r>=e.PI?r-e.PI:r+e.PI,o.latitude=e.HalfPI-a}return o.position3D=new t.Vector3(-Math.cos(o.latitude)*Math.sin(o.longitude),Math.sin(o.latitude),Math.cos(o.latitude)*Math.cos(o.longitude)),o.hasOwnProperty("visible")||(o.visible=!0),o.$el.psvMarker=o,this.markers[o.id]=o,i!==!1&&this.updatePositions(),o},n.prototype.removeMarker=function(t,e){t=this.getMarker(t),t.$el.parentNode.removeChild(t.$el),delete this.markers[t.id],e!==!1&&this.updatePositions()},n.prototype.gotoMarker=function(t,e){t=this.getMarker(t),this.psv.animate(t.longitude,t.latitude,e)},n.prototype.hideMarker=function(t){this.getMarker(t).visible=!1,this.updatePositions()},n.prototype.showMarker=function(t){this.getMarker(t).visible=!0,this.updatePositions()},n.prototype.toggleMarker=function(t){this.getMarker(t).visible^=!0,this.updatePositions()},n.prototype.updatePositions=function(){this.psv.camera.updateProjectionMatrix();for(var t in this.markers){var e=this.markers[t],o=this._getMarkerPosition(e);this._isMarkerVisible(e,o)?(e.position2D=o,e.$el.style.transform="translate3D("+o.left+"px, "+o.top+"px, 0px)",e.$el.classList.contains("visible")||e.$el.classList.add("visible")):(e.position2D=null,e.$el.classList.remove("visible"))}},n.prototype._isMarkerVisible=function(t,e){return t.visible&&t.position3D.dot(this.psv.prop.direction)>0&&e.left+t.width>=0&&e.left-t.width<=this.psv.prop.size.width&&e.top+t.height>=0&&e.top-t.height<=this.psv.prop.size.height},n.prototype._getMarkerPosition=function(t){if(t.dynamicSize){t.$el.classList.add("transparent");var e=t.$el.getBoundingClientRect();t.$el.classList.remove("transparent"),t.width=e.right-e.left,t.height=e.bottom-e.top}var o=t.position3D.clone();return o.project(this.psv.camera),{top:(1-o.y)/2*this.psv.prop.size.height-t.height*t.anchor.top,left:(o.x+1)/2*this.psv.prop.size.width-t.width*t.anchor.left}},n.prototype._onMouseEnter=function(t){if(t.target&&t.target.psvMarker&&t.target.psvMarker.tooltip){var e=t.target.psvMarker;this.psv.tooltip.showTooltip({content:e.tooltip.content,position:e.tooltip.position,top:e.position2D.top,left:e.position2D.left,marker:e})}},n.prototype._onMouseLeave=function(t){t.target&&t.target.psvMarker&&this.psv.tooltip.hideTooltip()},n.prototype._onClick=function(t){if(!this.psv.prop.moved){var e;t.target&&(e=m.getClosest(t.target,".psv-marker"))&&e.psvMarker?(this.currentMarker=e.psvMarker,this.psv.trigger("select-marker",e.psvMarker),t.preventDefault()):this.currentMarker&&(this.currentMarker=null,this.psv.trigger("unselect-marker")),e&&e.psvMarker&&e.psvMarker.content?this.psv.panel.showPanel(e.psvMarker.content):this.psv.panel.prop.opened&&(t.preventDefault(),this.psv.panel.hidePanel())}},s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.publicMethods=["showPanel","hidePanel"],s.prototype.create=function(){o.prototype.create.call(this),this.container.className="psv-panel",this.container.innerHTML='<div class="resizer"></div><div class="close-button"></div><div class="content"></div>',this.content=this.container.querySelector(".content");var t=this.container.querySelector(".close-button");t.addEventListener("click",this.hidePanel.bind(this)),this.psv.config.mousewheel&&this.container.addEventListener(m.mouseWheelEvent(),function(t){t.stopPropagation()});var e=this.container.querySelector(".resizer");e.addEventListener("mousedown",this),e.addEventListener("touchstart",this),this.psv.container.addEventListener("mouseup",this),this.psv.container.addEventListener("touchend",this),this.psv.container.addEventListener("mousemove",this),this.psv.container.addEventListener("touchmove",this)},s.prototype.destroy=function(){this.psv.container.removeEventListener("mousemove",this),this.psv.container.removeEventListener("touchmove",this),this.psv.container.removeEventListener("mouseup",this),this.psv.container.removeEventListener("touchend",this),o.prototype.destroy.call(this)},s.prototype.handleEvent=function(t){switch(t.type){case"mousedown":this._onMouseDown(t);break;case"touchstart":this._onTouchStart(t);break;case"mousemove":this._onMouseMove(t);break;case"touchmove":this._onMouseMove(t);break;case"mouseup":this._onMouseUp(t);break;case"touchend":this._onMouseUp(t)}},s.prototype.showPanel=function(t,e){this.content.innerHTML=t,this.content.scrollTop=0,this.container.classList.add("open"),e?this.content.classList.contains("no-margin")||this.content.classList.add("no-margin"):this.content.classList.remove("no-margin"),this.prop.opened=!0,this.psv.trigger("open-panel")},s.prototype.hidePanel=function(){this.prop.opened=!1,this.container.classList.remove("open"),this.psv.trigger("close-panel")},s.prototype._onMouseDown=function(t){t.stopPropagation(),this._startResize(t)},s.prototype._onTouchStart=function(t){t.stopPropagation(),this._startResize(t.changedTouches[0])},s.prototype._startResize=function(t){this.prop.mouse_x=parseInt(t.clientX),this.prop.mouse_y=parseInt(t.clientY),this.prop.mousedown=!0,this.content.classList.add("no-interaction")},s.prototype._onMouseUp=function(t){this.prop.mousedown&&(t.stopPropagation(),this.prop.mousedown=!1,this.content.classList.remove("no-interaction"))},s.prototype._onMouseMove=function(t){this.prop.mousedown&&(t.stopPropagation(),this._resize(t))},s.prototype._onTouchMove=function(t){this.prop.mousedown&&(t.stopPropagation(),this._resize(t.changedTouches[0]))},s.prototype._resize=function(t){var e=parseInt(t.clientX),o=parseInt(t.clientY);this.container.style.width=this.container.offsetWidth-(e-this.prop.mouse_x)+"px",this.prop.mouse_x=e,this.prop.mouse_y=o},r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.publicMethods=["showTooltip","hideTooltip"],r.leftMap={0:"left",.5:"center",1:"right"},r.topMap={0:"top",.5:"center",1:"bottom"},r.prototype.create=function(){o.prototype.create.call(this),this.container.innerHTML='<div class="arrow"></div><div class="content"></div>',this.container.className="psv-tooltip",this.container.style.top="-1000px",this.container.style.left="-1000px",this.psv.on("render",this)},r.prototype.destroy=function(){this.psv.off("render",this),o.prototype.destroy.call(this)},r.prototype.handleEvent=function(t){switch(t.type){case"psv:render":this.hideTooltip()}},r.prototype.showTooltip=function(t){var e=this.container,o=e.querySelector(".content"),i=e.querySelector(".arrow");if(t.position||(t.position=["top","center"]),t.marker||(t.marker={width:0,height:0}),"string"==typeof t.position){var n=m.parsePosition(t.position);if(!(n.left in r.leftMap&&n.top in r.topMap))throw new f('unable to parse tooltip position "'+tooltip.position+'"');t.position=[r.topMap[n.top],r.leftMap[n.left]]}if("center"==t.position[0]&&"center"==t.position[1])throw new f('unable to parse tooltip position "center center"');e.className="psv-tooltip",t.className&&e.classList.add(t.className),o.innerHTML=t.content,e.style.top="0px",e.style.left="0px";var s=e.getBoundingClientRect(),a={posClass:t.position.slice(),width:s.right-s.left,height:s.bottom-s.top,top:0,left:0,arrow_top:0,arrow_left:0};this._computeTooltipPosition(a,t);var h=!1;a.top<this.config.offset?(a.posClass[0]="bottom",h=!0):a.top+a.height>this.psv.prop.size.height-this.config.offset&&(a.posClass[0]="top",h=!0),a.left<this.config.offset?(a.posClass[1]="right",h=!0):a.left+a.width>this.psv.prop.size.width-this.config.offset&&(a.posClass[1]="left",h=!0),h&&this._computeTooltipPosition(a,t),e.style.top=a.top+"px",e.style.left=a.left+"px",i.style.top=a.arrow_top+"px",i.style.left=a.arrow_left+"px",e.classList.add(a.posClass.join("-"));var p=this;setTimeout(function(){e.classList.add("visible"),p.psv.trigger("show-tooltip")},100)},r.prototype.hideTooltip=function(){this.container.classList.remove("visible"),this.psv.trigger("hide-tooltip");var t=this;setTimeout(function(){t.container.style.top="-1000px",t.container.style.left="-1000px"},100)},r.prototype._computeTooltipPosition=function(t,e){var o=!1;switch(t.posClass[0]){case"bottom":t.top=e.top+e.marker.height+this.config.offset+this.config.arrow_size,t.arrow_top=2*-this.config.arrow_size,o=!0;break;case"center":t.top=e.top+e.marker.height/2-t.height/2,t.arrow_top=t.height/2-this.config.arrow_size;break;case"top":t.top=e.top-t.height-this.config.offset-this.config.arrow_size,t.arrow_top=t.height,o=!0}switch(t.posClass[1]){
case"right":o?(t.left=e.left,t.arrow_left=e.marker.width/2-this.config.arrow_size):(t.left=e.left+e.marker.width+this.config.offset+this.config.arrow_size,t.arrow_left=2*-this.config.arrow_size);break;case"center":t.left=e.left+e.marker.width/2-t.width/2,t.arrow_left=t.width/2-this.config.arrow_size;break;case"left":o?(t.left=e.left-t.width+e.marker.width,t.arrow_left=t.width-e.marker.width/2-this.config.arrow_size):(t.left=e.left-t.width-this.config.offset-this.config.arrow_size,t.arrow_left=t.width)}},a.prototype=Object.create(o.prototype),a.prototype.constructor=a,a.publicMethods=["setCaption"],a.DEFAULTS={autorotate:!0,zoom:!0,fullscreen:!0,download:!0,markers:!0},a.prototype.create=function(){o.prototype.create.call(this),this.container.className="psv-navbar",this.config.autorotate&&this.buttons.push(new p(this)),this.config.zoom&&this.buttons.push(new l(this)),this.config.download&&this.buttons.push(new u(this)),this.config.markers&&this.buttons.push(new d(this)),this.config.fullscreen&&this.buttons.push(new c(this)),this.caption=document.createElement("div"),this.caption.className="caption",this.container.appendChild(this.caption),this.setCaption(this.psv.config.caption)},a.prototype.destroy=function(){this.buttons.forEach(function(t){t.destroy()}),this.buttons.length=0,o.prototype.destroy.call(this)},a.prototype.setCaption=function(t){t?(this.caption.style.display="block",this.caption.innerHTML=t):this.caption.style.display="none"},h.prototype.create=function(){this.button=document.createElement("div"),this.button.className="psv-button",this.navbar.container.appendChild(this.button)},h.prototype.destroy=function(){this.navbar.container.removeChild(this.button),this.navbar=null,this.psv=null,this.button=null},h.prototype.toggleActive=function(t){t?this.button.classList.add("active"):this.button.classList.remove("active")},p.prototype=Object.create(h.prototype),p.prototype.constructor=p,p.prototype.create=function(){h.prototype.create.call(this),this.button.classList.add("autorotate-button"),this.button.title=this.psv.config.lang.autorotate;var t=document.createElement("div");t.className="sphere",this.button.appendChild(t);var e=document.createElement("div");e.className="equator",this.button.appendChild(e),this.button.addEventListener("click",this.psv.toggleAutorotate.bind(this.psv)),this.psv.on("autorotate",this.toggleActive.bind(this))},c.prototype=Object.create(h.prototype),c.prototype.constructor=c,c.prototype.create=function(){h.prototype.create.call(this),this.button.classList.add("fullscreen-button"),this.button.title=this.psv.config.lang.fullscreen,this.button.appendChild(document.createElement("div")),this.button.appendChild(document.createElement("div")),this.button.addEventListener("click",this.psv.toggleFullscreen.bind(this.psv)),this.psv.on("fullscreen-updated",this)},c.prototype.destroy=function(){this.psv.off("fullscreen-updated",this),h.prototype.destroy.call(this)},c.prototype.handleEvent=function(t){switch(t.type){case"psv:fullscreen-updated":this.toggleActive()}},l.prototype=Object.create(h.prototype),l.prototype.constructor=l,l.prototype.create=function(){h.prototype.create.call(this),this.button.classList.add("zoom-button");var t=document.createElement("div");t.className="minus",t.title=this.psv.config.lang.zoomOut,t.innerHTML=e.ICONS["zoom-out.svg"],this.button.appendChild(t);var o=document.createElement("div");o.className="range",this.button.appendChild(o),this.zoom_range=document.createElement("div"),this.zoom_range.className="line",this.zoom_range.title=this.psv.config.lang.zoom,o.appendChild(this.zoom_range),this.zoom_value=document.createElement("div"),this.zoom_value.className="handle",this.zoom_value.title=this.psv.config.lang.zoom,this.zoom_range.appendChild(this.zoom_value);var i=document.createElement("div");i.className="plus",i.title=this.psv.config.lang.zoomIn,i.innerHTML=e.ICONS["zoom-in.svg"],this.button.appendChild(i),this.zoom_range.addEventListener("mousedown",this),this.zoom_range.addEventListener("touchstart",this),this.psv.container.addEventListener("mousemove",this),this.psv.container.addEventListener("touchmove",this),this.psv.container.addEventListener("mouseup",this),this.psv.container.addEventListener("touchend",this),t.addEventListener("click",this.psv.zoomOut.bind(this.psv)),i.addEventListener("click",this.psv.zoomIn.bind(this.psv)),this.psv.on("zoom-updated",this);var n=this;setTimeout(function(){n._moveZoomValue(n.psv.prop.zoom_lvl)},0)},l.prototype.destroy=function(){this.psv.container.removeEventListener("mousemove",this),this.psv.container.removeEventListener("touchmove",this),this.psv.container.removeEventListener("mouseup",this),this.psv.container.removeEventListener("touchend",this),this.psv.off("zoom-updated",this),h.prototype.destroy.call(this)},l.prototype.handleEvent=function(t){switch(t.type){case"mousedown":this._initZoomChangeWithMouse(t);break;case"touchstart":this._initZoomChangeByTouch(t);break;case"mousemove":this._changeZoomWithMouse(t);break;case"touchmove":this._changeZoomByTouch(t);break;case"mouseup":this._stopZoomChange(t);break;case"touchend":this._stopZoomChange(t);break;case"psv:zoom-updated":this._moveZoomValue(t.args[0])}},l.prototype._moveZoomValue=function(t){this.zoom_value.style.left=t/100*this.zoom_range.offsetWidth-this.zoom_value.offsetWidth/2+"px"},l.prototype._initZoomChangeWithMouse=function(t){this.prop.mousedown=!0,this._changeZoom(t.clientX)},l.prototype._initZoomChangeByTouch=function(t){this.prop.mousedown=!0,this._changeZoom(t.changedTouches[0].clientX)},l.prototype._stopZoomChange=function(t){this.prop.mousedown=!1},l.prototype._changeZoomWithMouse=function(t){t.preventDefault(),this._changeZoom(t.clientX)},l.prototype._changeZoomByTouch=function(t){t.preventDefault(),this._changeZoom(t.changedTouches[0].clientX)},l.prototype._changeZoom=function(t){if(this.prop.mousedown){var e=parseInt(t)-this.zoom_range.getBoundingClientRect().left,o=e/this.zoom_range.offsetWidth*100;this.psv.zoom(o)}},u.prototype=Object.create(h.prototype),u.prototype.constructor=u,u.prototype.create=function(){h.prototype.create.call(this),this.button.classList.add("download-button"),this.button.title=this.psv.config.lang.download,this.button.appendChild(document.createElement("div")),this.button.addEventListener("mouseenter",this.toggleActive.bind(this,!0)),this.button.addEventListener("mouseleave",this.toggleActive.bind(this,!1)),this.button.addEventListener("click",this.download.bind(this))},u.prototype.download=function(){var t=document.createElement("a");t.href=this.psv.config.panorama,t.download=this.psv.config.panorama,this.psv.container.appendChild(t),t.click()},d.prototype=Object.create(h.prototype),d.prototype.constructor=d,d.prototype.create=function(){h.prototype.create.call(this),this.button.classList.add("markers-button"),this.button.title=this.psv.config.lang.markers,this.button.innerHTML=e.ICONS["pin.svg"],this.button.addEventListener("click",this.toggleMarkers.bind(this)),this.psv.on("open-panel",this),this.psv.on("close-panel",this)},d.prototype.destroy=function(){this.psv.off("open-panel",this),this.psv.off("close-panel",this),h.prototype.destroy.call(this)},d.prototype.handleEvent=function(t){switch(t.type){case"psv:open-panel":this._onPanelOpened();break;case"psv:close-panel":this._onPanelClosed()}},d.prototype.toggleMarkers=function(){this.prop.panelOpened?this.hideMarkers():this.showMarkers()},d.prototype.showMarkers=function(){var t='<div class="psv-markers-list"><h1>'+this.psv.config.lang.markers+"</h1><ul>";for(var e in this.psv.hud.markers){var o=this.psv.hud.markers[e],i=o.id;o.html?i=o.html:o.tooltip&&(i="string"==typeof o.tooltip?o.tooltip:o.tooltip.content),t+='<li data-psv-marker="'+o.id+'">',o.image&&(t+='<img src="'+o.image+'"/>'),t+="<p>"+i+"</p></li>"}t+="</ul></div>",this.prop.panelOpening=!0,this.psv.panel.showPanel(t,!0),this.psv.panel.container.querySelector(".psv-markers-list").addEventListener("click",this._onClickItem.bind(this))},d.prototype.hideMarkers=function(){this.psv.panel.hidePanel()},d.prototype._onClickItem=function(t){var e;t.target&&(e=m.getClosest(t.target,"li"))&&e.dataset.psvMarker&&(this.psv.hud.gotoMarker(e.dataset.psvMarker,1e3),this.psv.panel.hidePanel())},d.prototype._onPanelOpened=function(){this.prop.panelOpening?(this.prop.panelOpening=!1,this.prop.panelOpened=!0):this.prop.panelOpened=!1,this.toggleActive(this.prop.panelOpened)},d.prototype._onPanelClosed=function(){this.prop.panelOpened=!1,this.prop.panelOpening=!1,this.toggleActive(this.prop.panelOpened)},f.prototype=Object.create(Error.prototype),f.prototype.name="PSVError",f.prototype.constructor=f;var m={};return m.isCanvasSupported=function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},m.isWebGLSupported=function(){var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl"))},m.getMaxTextureWidth=function(){var t=document.createElement("canvas"),e=t.getContext("webgl");return e.getParameter(e.MAX_TEXTURE_SIZE)},m.hasParent=function(t,e){do if(t===e)return!0;while(t=t.parentNode);return!1},m.getClosest=function(t,e){var o=t.matches||t.msMatchesSelector;do if(o.bind(t)(e))return t;while(t=t.parentElement);return null},m.mouseWheelEvent=function(){return"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"},m.fullscreenEvent=function(){var t={exitFullscreen:"fullscreenchange",webkitExitFullscreen:"webkitfullscreenchange",mozCancelFullScreen:"mozfullscreenchange",msExitFullscreen:"msFullscreenEnabled"};for(var e in t)if(e in document)return t[e];return"fullscreenchange"},m.stayBetween=function(t,e,o){return Math.max(e,Math.min(o,t))},m.getXMPValue=function(t,e){var o,i;return(o=t.indexOf("<GPano:"+e+">"))!==-1&&(i=t.indexOf("</GPano:"+e+">"))!==-1?t.substring(o,i).replace("<GPano:"+e+">",""):(o=t.indexOf("GPano:"+e))!==-1&&(i=t.indexOf('"',o))!==-1?t.substring(o+e.length+8,i):null},m.isFullscreenEnabled=function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},m.requestFullscreen=function(t){(t.requestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen||t.msRequestFullscreen).call(t)},m.exitFullscreen=function(t){(document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen).call(document)},m.getStyle=function(t,e){return window.getComputedStyle(t,null)[e]},m.parsePosition=function(t){if(!t)return{top:.5,left:.5};if("object"==typeof t)return t;var e=document.createElement("div");document.body.appendChild(e),e.style.backgroundPosition=t;var o=m.getStyle(e,"background-position").match(/^([0-9.]+)% ([0-9.]+)%$/);return document.body.removeChild(e),{left:o[1]/100,top:o[2]/100}},m.deepmerge=function(t,e){var o=Array.isArray(e),i=o&&[]||{};return o?(t=t||[],i=i.concat(t),e.forEach(function(e,o){"undefined"==typeof i[o]?i[o]=e:"object"==typeof e?i[o]=m.deepmerge(t[o],e):t.indexOf(e)===-1&&i.push(e)})):(t&&"object"==typeof t&&Object.keys(t).forEach(function(e){i[e]=t[e]}),Object.keys(e).forEach(function(o){"object"==typeof e[o]&&e[o]&&t[o]?i[o]=m.deepmerge(t[o],e[o]):i[o]=e[o]})),i},m.clone=function(t){return m.deepmerge({},t)},e.ICONS["pin.svg"]='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 48 48" enable-background="new 0 0 48 48" xml:space="preserve"><g><path d="M24,0C13.798,0,5.499,8.3,5.499,18.501c0,10.065,17.57,28.635,18.318,29.421C23.865,47.972,23.931,48,24,48   s0.135-0.028,0.183-0.078c0.748-0.786,18.318-19.355,18.318-29.421C42.501,8.3,34.202,0,24,0z M24,7.139   c5.703,0,10.342,4.64,10.342,10.343c0,5.702-4.639,10.342-10.342,10.342c-5.702,0-10.34-4.64-10.34-10.342   C13.66,11.778,18.298,7.139,24,7.139z"/></g></svg>',e.ICONS["zoom-in.svg"]='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 19.407 19.407" enable-background="new 0 0 19.407 19.406" xml:space="preserve"><path d="M14.043,12.22c2.476-3.483,1.659-8.313-1.823-10.789C8.736-1.044,3.907-0.228,1.431,3.255  c-2.475,3.482-1.66,8.312,1.824,10.787c2.684,1.908,6.281,1.908,8.965,0l4.985,4.985c0.503,0.504,1.32,0.504,1.822,0  c0.505-0.503,0.505-1.319,0-1.822L14.043,12.22z M7.738,13.263c-3.053,0-5.527-2.475-5.527-5.525c0-3.053,2.475-5.527,5.527-5.527  c3.05,0,5.524,2.474,5.524,5.527C13.262,10.789,10.788,13.263,7.738,13.263z"/><polygon points="8.728,4.009 6.744,4.009 6.744,6.746 4.006,6.746 4.006,8.73 6.744,8.73 6.744,11.466 8.728,11.466 8.728,8.73   11.465,8.73 11.465,6.746 8.728,6.746 "/></svg>',e.ICONS["zoom-out.svg"]='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 19.407 19.407" enable-background="new 0 0 19.407 19.406" xml:space="preserve"><path d="M14.043,12.22c2.476-3.483,1.659-8.313-1.823-10.789C8.736-1.044,3.907-0.228,1.431,3.255  c-2.475,3.482-1.66,8.312,1.824,10.787c2.684,1.908,6.281,1.908,8.965,0l4.985,4.985c0.503,0.504,1.32,0.504,1.822,0  c0.505-0.503,0.505-1.319,0-1.822L14.043,12.22z M7.738,13.263c-3.053,0-5.527-2.475-5.527-5.525c0-3.053,2.475-5.527,5.527-5.527  c3.05,0,5.524,2.474,5.524,5.527C13.262,10.789,10.788,13.263,7.738,13.263z"/><rect x="4.006" y="6.746" width="7.459" height="1.984"/></svg>',e})},{}],2:[function(e,o,i){!function(e,i){"undefined"!=typeof o&&o.exports?o.exports=i():"function"==typeof t&&t.amd?t([],i):e.uEvent=i()}(this,function(){"use strict";var t=function(){return!0},e=function(){return!1},o=function(){};return o.Event=function(t,e){var o=t,i=e;Object.defineProperties(this,{type:{get:function(){return o},set:function(t){},enumerable:!0},args:{get:function(){return i},set:function(t){},enumerable:!0}})},o.Event.prototype={constructor:o.Event,isDefaultPrevented:e,isPropagationStopped:e,preventDefault:function(){this.isDefaultPrevented=t},stopPropagation:function(){this.isPropagationStopped=t}},o.prototype={constructor:o,on:function(t,e){if(this.__events=this.__events||{},"object"==typeof t)for(var o in t)t.hasOwnProperty(o)&&(this.__events[o]=this.__events[o]||[],this.__events[o].push(t[o]));else t.split(" ").forEach(function(t){this.__events[t]=this.__events[t]||[],this.__events[t].push(e)},this);return this},off:function(t,e){if(this.__events=this.__events||{},"object"==typeof t){for(var o in t)if(t.hasOwnProperty(o)&&o in this.__events){var i=this.__events[o].indexOf(t[o]);i!==-1&&this.__events[o].splice(i,1)}}else t?t.split(" ").forEach(function(t){if(t in this.__events)if(e){var o=this.__events[t].indexOf(e);o!==-1&&this.__events[t].splice(o,1)}else this.__events[t].length=0},this):this.__events={};return this},once:function(t,e){if(this.__once=this.__once||{},"object"==typeof t)for(var o in t)t.hasOwnProperty(o)&&(this.__once[o]=this.__once[o]||[],this.__once[o].push(t[o]));else t.split(" ").forEach(function(t){this.__once[t]=this.__once[t]||[],this.__once[t].push(e)},this);return this},trigger:function(t){var e,i,n,s=Array.prototype.slice.call(arguments,1),r=new o.Event(t,s);if(s.push(r),this.__events&&t in this.__events)for(e=0,i=this.__events[t].length;e<i;e++)if(n=this.__events[t][e],"object"==typeof n?n.handleEvent(r):n.apply(this,s),r.isPropagationStopped())return r;if(this.__once&&t in this.__once){for(e=0,i=this.__once[t].length;e<i;e++)if(n=this.__once[t][e],"object"==typeof n?n.handleEvent(r):n.apply(this,s),r.isPropagationStopped())return delete this.__once[t],r;delete this.__once[t]}return r},change:function(t,e){var i,n,s,r=Array.prototype.slice.call(arguments,1),a=new o.Event(t,r);if(r.push(a),this.__events&&t in this.__events)for(i=0,n=this.__events[t].length;i<n;i++)if(r[0]=e,s=this.__events[t][i],e="object"==typeof s?s.handleEvent(a):s.apply(this,r),a.isPropagationStopped())return e;return e}},o.mixin=function(t,e){e=e||{},t="function"==typeof t?t.prototype:t,["on","off","once","trigger","change"].forEach(function(i){var n=e[i]||i;t[n]=o.prototype[i]}),Object.defineProperties(t,{__events:{value:null,writable:!0},__once:{value:null,writable:!0}})},o})},{}],3:[function(t,e,o){(function(i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(o,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},h=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),p=function(t,e,o){for(var i=!0;i;){var n=t,s=e,r=o;i=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,s);if(void 0!==a){if("value"in a)return a.value;var h=a.get;if(void 0===h)return;return h.call(r)}var p=Object.getPrototypeOf(n);if(null===p)return;t=p,e=s,o=r,i=!0,a=p=void 0}},c="undefined"!=typeof window?window.React:"undefined"!=typeof i?i.React:null,l=n(c),u=t("photo-sphere-viewer-sa"),d=t("uevent"),f=(n(d),function(t){function e(){s(this,e),p(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return r(e,t),h(e,[{key:"componentWillMount",value:function(){console.log(u.PhotoSphereViewer)}},{key:"componentDidMount",value:function(){var t=this.props,e=t.src,o=t.options;this.psv=new u.PhotoSphereViewer(a({},o,{panorama:e}))}},{key:"componentWillUnmount",value:function(){this.psv.destroy()}},{key:"render",value:function(){var t=this.props.options.container;return l["default"].createElement("div",{id:t})}}]),e}(c.Component));f.defaultProps={options:{navbar:!1,gyroscope:!1,loading_text:"loading",container:"photosphere",navbar:"autorotate zoom fullscreen",size:{height:400}}},f.propTypes={src:c.PropTypes.string.isRequired,options:c.PropTypes.object},o["default"]=f,e.exports=o["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"photo-sphere-viewer-sa":1,uevent:2}]},{},[3])(3)});